(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{6511:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-list"},[t("div",{staticClass:"search-box"},[t("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"用户名："}},[t("el-input",{attrs:{placeholder:""},model:{value:e.formInline.userName,callback:function(t){e.$set(e.formInline,"userName",t)},expression:"formInline.userName"}})],1),t("el-form-item",{attrs:{label:"产品线："}},[t("el-input",{attrs:{placeholder:""},model:{value:e.formInline.productLine,callback:function(t){e.$set(e.formInline,"productLine",t)},expression:"formInline.productLine"}})],1),t("el-form-item",{attrs:{label:"行业："}},[t("el-input",{attrs:{placeholder:""},model:{value:e.formInline.industry,callback:function(t){e.$set(e.formInline,"industry",t)},expression:"formInline.industry"}})],1),t("el-form-item",{attrs:{label:"任务创建时间："}},[t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{prop:"startDate"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"开始时间"},model:{value:e.formInline.startDate,callback:function(t){e.$set(e.formInline,"startDate",t)},expression:"formInline.startDate"}})],1)],1),t("el-col",{staticClass:"line",attrs:{span:2}},[e._v("~")]),t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{prop:"endDate"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"结束时间"},model:{value:e.formInline.endDate,callback:function(t){e.$set(e.formInline,"endDate",t)},expression:"formInline.endDate"}})],1)],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("搜索")])],1)],1)],1),t("div",{staticClass:"table-box"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.currentTableData,height:"250",border:""}},[t("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"180",sortable:""}}),t("el-table-column",{attrs:{prop:"productLine",label:"产品线",width:"180",sortable:""}}),t("el-table-column",{attrs:{prop:"industry",label:"行业"}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",sortable:""}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleAudit(a.row)}}},[e._v("审核")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},l=[],i=(a("14d9"),{data(){return{input:"",formInline:{userName:"",productLine:"",industry:""},tableData:[],currentPage:1,pageSize:10}},components:{},watch:{},created(){this.getAuditList()},computed:{currentTableData(){return this.tableData.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},methods:{getAuditList(){this.$axios({method:"get",url:"/audit/userList"}).then(e=>{this.tableData=e.data.list,localStorage.setItem("audit_list",JSON.stringify(this.tableData))}).catch(e=>{this.$message({type:"error",message:e.msg||"服务器偷懒了"})})},handleAudit(e){this.$router.push({path:"/audit",query:{id:e.id}})},handleDelete(e){const t=this.tableData.findIndex(t=>t.id===e.id);this.$confirm("您确定要删除该审核项吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.tableData.splice(t,1),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},handleSizeChange(e){this.pageSize=e},handleCurrentChange(e){this.currentPage=e},onSubmit(){let e={},t=!0;for(let l in this.formInline)if("startDate"==l||"endDate"==l){const e=this.formInline.startDate,a=this.formInline.endDate;e&&a&&new Date(e)>new Date(a)&&(this.$alert("结束时间需晚于开始时间","",{confirmButtonText:"确定"}),t=!1)}if(!t)return;Object.keys(this.formInline).forEach(t=>{this.formInline[t]&&Object.assign(e,{[t]:this.formInline[t]})});const a=Object.keys(e),n=a.length;this.tableData=JSON.parse(localStorage.getItem("audit_list")),n&&(this.tableData=this.tableData.filter(t=>{let a=!0;for(let n in e)if("startDate"==n||"endDate"==n){const n=e.startDate,l=e.endDate,i=t["createTime"];new Date(i)>=new Date(n)&&new Date(i)<=new Date(l)||(a=!1)}else-1==t[n].indexOf(e[n])&&(a=!1);if(a)return t}))}}}),r=i,s=a("2877"),o=Object(s["a"])(r,n,l,!1,null,"35c4dbc4",null);t["default"]=o.exports}}]);